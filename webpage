<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Mappls Debug</title>

  <!-- ✅ Put your real static key below -->
  <script src="https://sdk.mappls.com/map/sdk/web?v=3.0&access_token=nvhnelbhzrhnfzddisdqfnsqbpiifyrsiqzs"></script>

  <style>
    html, body { margin:0; padding:0; height:100%; }
    #topbar { padding:10px; font-family:Arial; background:#f3f3f3; }
    #map { width:100%; height:90vh; background:#eee; } /* grey if map doesn't load */
  </style>
</head>

<body>
  <div id="topbar">
    <b>Status:</b> <span id="status">Loading…</span>
  </div>
  <div id="map"></div>

  <script>
    // Show JS errors on the page itself
    window.onerror = function(msg, src, line, col) {
      document.getElementById("status").innerText =
        "JS Error: " + msg + " (line " + line + ")";
    };

    // Check whether SDK loaded
    document.getElementById("status").innerText =
      "mappls = " + (typeof window.mappls);

    // Try to create the map after a tiny delay
    setTimeout(() => {
      try {
        if (!window.mappls) throw new Error("Mappls SDK not loaded (mappls is undefined). Check key / network / adblock).");

        const map = new mappls.Map("map", {
          center: { lat: 28.612964, lng: 77.229463 },
          zoom: 12
        });

        document.getElementById("status").innerText = "Map created ✅";
      } catch (e) {
        document.getElementById("status").innerText = "Failed: " + e.message;
      }
    }, 300);
  </script>
</body>
</html>
